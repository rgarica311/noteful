(window.webpackJsonp=window.webpackJsonp||[]).push([[0],{200:function(e,t,n){},202:function(e,t,n){},204:function(e,t,n){},206:function(e,t,n){},208:function(e,t,n){},210:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),o=n(74),l=n.n(o),c=n(19),s=n(20),i=n(213),u=(n(85),n(4)),d=n(5),m=n(7),h=n(6),f=n(8),p=n(211),v=n(76),N=n(10),E=n(212),b=n(79),g=n(78);n(89);function y(e){e.tag,e.className,e.childrenm;var t=Object(g.a)(e,["tag","className","childrenm"]);return r.a.createElement(e.tag,Object(b.a)({className:["NavCircleButton",e.className].join(" ")},t),e.children)}y.defaultProps={tag:"a"};var j=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})},k=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.filter(function(e){return e.folderId===t}).length},O=(n(91),r.a.createContext({notes:[],folders:[],deleteNote:function(){}}));function F(e){return r.a.createElement(O.Consumer,null,function(e){return r.a.createElement("div",{className:"NoteListNav"},r.a.createElement("ul",{className:"NoteListNav__list"},e.folders.map(function(t){return r.a.createElement("li",{key:t.id},r.a.createElement(E.a,{className:"NoteListNav__folder-link",to:"/folder/".concat(t.id)},r.a.createElement("span",{className:"NoteListNav__num-notes"},k(e.notes,t.id)),t.name))})),r.a.createElement("div",{className:"NoteListNav__button-wrapper"},r.a.createElement(y,{tag:v.a,to:"/add-folder",type:"button",className:"NoteListNav__add-folder-button"},r.a.createElement(N.a,{icon:"plus"}),r.a.createElement("br",null),"Folder")))})}F.defaultProps={folders:[]};n(94);function _(e){return r.a.createElement(O.Consumer,null,function(t){return r.a.createElement("div",{className:"NotePageNav"},r.a.createElement(y,{tag:"button",role:"link",onClick:function(){return e.history.goBack()},className:"NotePageNav__back-button"},r.a.createElement(N.a,{icon:"chevron-left"}),r.a.createElement("br",null),"Back"),t.folder&&r.a.createElement("h3",{className:"NotePageNav__folder-name"},t.folder.name))})}_.defaultProps={history:{goBack:function(){}}};n(96);var C=n(77),S=function(e){function t(){return Object(u.a)(this,t),Object(m.a)(this,Object(h.a)(t).apply(this,arguments))}return Object(f.a)(t,e),Object(d.a)(t,[{key:"deleteNoteRequest",value:function(e,t){var n=this;fetch("http://localhost:9090/notes/".concat(e),{method:"DELETE",headers:{"content-type":"application/json"}}).then(function(e){return e.ok?e.json():e.json().then(function(e){throw e})}).then(function(a){t(e),void 0!==n.props.history&&n.props.history.goBack()}).catch(function(e){console.error(e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,function(t){return r.a.createElement("div",{className:"Note"},r.a.createElement("h2",{className:"Note__title"},r.a.createElement(v.a,{to:"/note/".concat(e.props.id)},e.props.name)),r.a.createElement("button",{className:"Note__delete",type:"button",onClick:function(){e.deleteNoteRequest(e.props.id,t.deleteNote)}},r.a.createElement(N.a,{icon:"trash-alt"})," ","remove"),r.a.createElement("div",{className:"Note__dates"},r.a.createElement("div",{className:"Note__dates-modified"},"Modified"," ",r.a.createElement("span",{className:"Date"},Object(C.format)(e.props.modified)))))})}}]),t}(a.Component);n(200);function w(e){return r.a.createElement("section",{className:"NoteListMain"},r.a.createElement("ul",null,e.notes.map(function(e){return r.a.createElement("li",{key:e.id},r.a.createElement(S,{id:e.id,name:e.name,modified:e.modified}))})),r.a.createElement("div",{className:"NoteListMain__button-container"},r.a.createElement(y,{tag:v.a,to:"/add-note",type:"button",className:"NoteListMain__add-note-button"},r.a.createElement(N.a,{icon:"plus"}),r.a.createElement("br",null),"Note")))}w.defaultProps={notes:[]};n(202);function P(e){return r.a.createElement("section",{className:"NotePageMain"},r.a.createElement(S,{history:e.history,id:e.note.id,name:e.note.name,modified:e.note.modified}),r.a.createElement("div",{className:"NotePageMain__content"},e.note.content.split(/\n \r|\n/).map(function(e,t){return r.a.createElement("p",{key:t},e)})))}P.defaultProps={note:{content:""}};n(204);function I(e){return e.message?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}n(206);var L=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={name:{value:"",touched:!1}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateFolderName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"validateFolderName",value:function(e){var t=this.state.name.value.trim();return 0===t.length?"Name is required":t.length<3?"Folder name must be at lest 3 character long":void 0}},{key:"handleSubmit",value:function(e){e.preventDefault();var t={name:this.state.name.value};fetch("http://localhost:9090/folders",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(t)}).then(this.props.getFolders,this.props.history.push("/")).catch(function(e){return console.error("Error:",e)})}},{key:"render",value:function(){var e=this;return r.a.createElement(O.Consumer,null,function(t){return r.a.createElement("form",{className:"addFolder",onSubmit:function(n){return e.handleSubmit(n,t.setFolders)}},r.a.createElement("h2",null,"Add Folder"),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"name"},"Folder Name"),r.a.createElement("input",{type:"text",className:"folder-input",name:"name",onChange:function(t){return e.updateFolderName(t.target.value)}}),e.state.name.touched&&r.a.createElement(I,{message:e.validateFolderName()})),r.a.createElement("button",{type:"submit",className:"add-folder-button",disabled:e.validateFolderName()},"Save"))})}}]),t}(a.Component);function A(e){return e.message?r.a.createElement("div",{className:"error"},e.message):r.a.createElement(r.a.Fragment,null)}n(208);var D=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={name:{value:"",touched:!1},content:{value:"",touched:!1},folder:{value:"Important",touched:!1}},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"updateNoteName",value:function(e){this.setState({name:{value:e,touched:!0}})}},{key:"updateNoteFolder",value:function(e){this.setState({folder:{value:e,touched:!0}})}},{key:"updateNoteContent",value:function(e){this.setState({content:{value:e,touched:!0}})}},{key:"validateNote",value:function(e){var t=this.state.name.value.trim();return 0===t.length?"Name is required":t.length<3?"Note name must be at least 3 characters long":void 0}},{key:"validateNoteFolder",value:function(e){for(var t=this.state.folder.value.trim(),n=[],a=0;a<this.props.folders.length;a++)n.push(this.props.folders[a].name);return n.includes(t)?"Folder ".concat(t," is available"):"Folder ".concat(t," does not exist")}},{key:"validateNoteContent",value:function(e){var t=this.state.content.value.trim();return 0===t.length?"Note cannot be empty":t.length<3?"Note content must be at least 3 characters long":void 0}},{key:"handleSubmit",value:function(e){e.preventDefault();var t=this.state.name,n=this.state.folder.value.trim(),a=function(e,t,n){for(var a=0;a<e.length;a++)if(e[a][t]===n)return a;return-1}(this.props.folders,"name",n),r=this.props.folders[a].id,o=this.state.content,l={name:t.value,folderId:r,content:o.value,modified:new Date};fetch("http://localhost:9090/Notes",{method:"POST",headers:{"content-type":"application/json"},body:JSON.stringify(l)}).then(this.props.getNotes,this.props.history.push("/")).catch(function(e){return console.error("Error:",e)})}},{key:"renderOptions",value:function(){return r.a.createElement(r.a.Fragment,null,this.props.folders.map(function(e){return r.a.createElement("option",{key:e.name,value:e.name},e.name)}))}},{key:"render",value:function(){var e=this;return r.a.createElement("form",{className:"addNote",onSubmit:function(t){return e.handleSubmit(t)}},r.a.createElement("h2",null,"Add Note"),r.a.createElement("div",{className:"formGroup"},r.a.createElement("label",{htmlFor:"name"},"Note Name:"),r.a.createElement("input",{type:"text",className:"add-note-control",name:"name",onChange:function(t){return e.updateNoteName(t.target.value)}}),this.state.name.touched&&r.a.createElement(A,{message:this.validateNote()}),r.a.createElement("label",{htmlFor:"Content"},"Note:"),r.a.createElement("input",{type:"text",className:"add-note-content-control",name:"Content",onChange:function(t){return e.updateNoteContent(t.target.value)}}),this.state.content.touched&&r.a.createElement(A,{message:this.validateNoteContent()}),r.a.createElement("label",{htmlFor:"Folder"},"Pick Folder:"),r.a.createElement("select",{name:"Folder",onChange:function(t){return e.updateNoteFolder(t.target.value)}},this.renderOptions())),r.a.createElement("button",{type:"submit",className:"add-note-button",disabled:this.validateNote()},"Save"))}}]),t}(a.Component);D.defaultProps={folders:"Important"};var M=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Could not render Add Folder Form"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),x=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Could not render Add Note Form"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),B=function(e){function t(e){var n;return Object(u.a)(this,t),(n=Object(m.a)(this,Object(h.a)(t).call(this,e))).state={hasError:!1},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"render",value:function(){return this.state.hasError?r.a.createElement("h2",null,"Could not render Note Page"):this.props.children}}],[{key:"getDerivedStateFromError",value:function(e){return{hasError:!0}}}]),t}(a.Component),R=function(e){function t(){var e,n;Object(u.a)(this,t);for(var a=arguments.length,r=new Array(a),o=0;o<a;o++)r[o]=arguments[o];return(n=Object(m.a)(this,(e=Object(h.a)(t)).call.apply(e,[this].concat(r)))).state={notes:[],folders:[],error:null},n.setFolders=function(e){n.setState({folders:e})},n.setNotes=function(e){n.setState({notes:e})},n.deleteNote=function(e){var t=n.state.notes.filter(function(t){return t.id!==e});n.setState({notes:t})},n.getFolders=function(){fetch("http://localhost:9090/folders").then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(n.setFolders).catch(function(e){return n.setState({error:e})})},n.getNotes=function(){fetch("http://localhost:9090/notes").then(function(e){if(!e.ok)throw new Error(e.stats);return e.json()}).then(n.setNotes).catch(function(e){return n.setState({error:e})})},n}return Object(f.a)(t,e),Object(d.a)(t,[{key:"componentDidMount",value:function(){var e=this;fetch("http://localhost:9090/folders").then(function(e){if(!e.ok)throw new Error(e.status);return e.json()}).then(this.setFolders).catch(function(t){return e.setState({error:t})}),fetch("http://localhost:9090/notes").then(function(e){if(!e.ok)throw new Error(e.stats);return e.json()}).then(this.setNotes).catch(function(t){return e.setState({error:t})})}},{key:"renderNavRoutes",value:function(){var e=this,t=this.state,n=t.notes,a=t.folders;return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(e){return r.a.createElement(p.a,{exact:!0,key:e,path:e,component:F})}),r.a.createElement(p.a,{path:"/note/:noteId",render:function(e){var t=e.match.params.noteId,o=j(n,t)||{},l=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return e.find(function(e){return e.id===t})}(a,o.folderId);return r.a.createElement(_,Object.assign({},e,{folder:l}))}}),r.a.createElement(p.a,{path:"/add-folder",component:_}),r.a.createElement(p.a,{path:"/add-folder",render:function(t){return r.a.createElement("div",null,r.a.createElement(M,null,r.a.createElement(L,{history:t.history,getFolders:e.getFolders})))}}),r.a.createElement(p.a,{path:"/add-note",component:_}),r.a.createElement(p.a,{path:"/add-note",render:function(t){var a=t.match.params.noteId,o=j(n,a);return r.a.createElement("div",null,r.a.createElement(x,null,r.a.createElement(D,{note:o,history:t.history,getNotes:e.getNotes,folders:e.state.folders})))}}))}},{key:"renderMainRoutes",value:function(){var e=this.state.notes;return r.a.createElement(r.a.Fragment,null,["/","/folder/:folderId"].map(function(t){return r.a.createElement(p.a,{exact:!0,key:t,path:t,render:function(t){var n=t.match.params.folderId,a=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[],t=arguments.length>1?arguments[1]:void 0;return t?e.filter(function(e){return e.folderId===t}):e}(e,n);return r.a.createElement(w,Object.assign({},t,{notes:a}))}})}),r.a.createElement(p.a,{path:"/note/:noteId",render:function(t){var n=t.match.params.noteId,a=j(e,n);return console.log("noteid in route noteid ".concat(n)),console.log("note in route noteid ".concat(a)),r.a.createElement(B,null,r.a.createElement(P,Object.assign({},t,{history:t.history,note:a})))}}))}},{key:"render",value:function(){var e={notes:this.state.notes,folders:this.state.folders,deleteNote:this.deleteNote,setFolders:this.setFolders};return r.a.createElement(O.Provider,{value:e},r.a.createElement("div",{className:"App"},r.a.createElement("nav",{className:"App__nav"},this.renderNavRoutes()),r.a.createElement("header",{className:"App__header"},r.a.createElement("h1",null,r.a.createElement(v.a,{to:"/"},"Noteful")," ",r.a.createElement(N.a,{icon:"check-double"}))),r.a.createElement("main",{className:"App__main"},this.renderMainRoutes())))}}]),t}(a.Component);c.b.add(s.c,s.b,s.d,s.a),l.a.render(r.a.createElement(i.a,null,r.a.createElement(R,null)),document.getElementById("root"))},80:function(e,t,n){e.exports=n(210)},85:function(e,t,n){},89:function(e,t,n){},91:function(e,t,n){},94:function(e,t,n){},96:function(e,t,n){}},[[80,2,1]]]);
//# sourceMappingURL=main.1428ecac.chunk.js.map